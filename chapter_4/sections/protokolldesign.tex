\section{Protokollstruktur}
\label{sec:protokolldesign_und_struktur}

% Das Protokoll basiert auf Peer-to-Peer. Die direkte Verbindung mittels DHTs wird
% bevorzugt, erst wenn diese nicht möglich ist, wird die Nachricht über ein TCP-Relay
% weitergeleitet.

% #TODO: hashing in Betracht gezogen, aber da er nur dazu dient eine ID zu erzeugen bzw. man einen Nutzer daran identifizieren soll, ist das eigentlich nicht notwendig zu hashen. Es ist kryptografisch nicht notwendig
% #TODO: deshalb den Benutzernamen verwenden, der ja sowieso eindeutig sein muss (aus UX-Gründen), ihn auf 20 Zeichen limitieren (utf-8 -> 160 bits/8 = 20) und gegebenenfalls mit Nullen auffüllen, falls er kürzer ist


Die Architektur des Protokolls basiert auf Peer-to-Peer. Das bedeutet, dass alle Teilnehmer gleichberechtigt sind und es keinen zentralen Server gibt, der die Kommunikation steuert. Somit erfolgt die Kommunikation direkt zwischen den Teilnehmern. Alle Teilnehmer sind in einem Netzwerk organisiert, das aus verschiedenen Knoten besteht, wobei jeder Knoten einen Teilnehmer des Netzwerks repräsentiert. Alle Knoten im Netzwerk sind untereinander verbunden und können Textnachrichten austauschen. Die direkte Verbindung wird bevorzugt, erst wenn diese nicht möglich ist, wird die Nachricht über ein TCP-Relay weitergeleitet. Die Blockchain findet ihren Einsatz bei der Identifikation der Teilnehmer. Jeder Teilnehmer hat eine eindeutige ID, die aus dem Benutzernamen besteht und bei der Registrierung in der Blockchain gespeichert wird, und somit für alle Teilnehmer einsehbar ist.
% #TODO: Vielleicht noch den Sicherheitsaspekt der Blockchain erklären, dass die IDs nicht gefälscht werden können, da sie in der Blockchain gespeichert sind und somit nicht manipuliert werden können; wenn die Nachrichten mit dem public key, der in der Blockchain liegt, signiert werden, bietet auch das eine Sicherheit, dass die Nachrichten nicht gefälscht werden können

\input{chapter_4/sections/subsections/protokollgrundlagen.tex}

\input{chapter_4/sections/subsections/identifikation.tex}

\input{chapter_4/sections/subsections/nachrichtenformat.tex}

\input{chapter_4/sections/subsections/routing.tex}

%\input{chapter_4/sections/subsections/statusinformation.tex}

\input{chapter_4/sections/subsections/verbindungsmanagement.tex}

%\input{chapter_4/sections/subsections/verbindung.tex}

%\input{chapter_4/sections/subsections/nachrichten.tex}

%\input{chapter_4/sections/subsections/nachrichtenverlauf.tex}

\input{chapter_4/sections/subsections/sicherheit.tex}

\input{chapter_4/sections/subsections/fehlerbehandlung.tex}
